<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ajax json cache</title>
	<script src="../sources/jquery-2.1.3.js"></script>
	<script>
		var cache = [];
		$(function(){
			$('.getList').click(function(){
				if(cache.length == 0){
					$.ajax({
						url: 'request.php',
						type: 'GET',
						async: false
					}).done(function(data){
						cache = data;
					});
				}
				$('#listarray').empty();
				$.each(cache, function(key, val){
					$('#listarray').append("<li>" + key + " " + val.firstname + " " + val.lastname + "</li>");
				});
			});
		});
	</script>
</head>
<body>
	<ul id="listarray"></ul>
	<button class="getList">Get list</button>
</body>
</html>